<!DOCTYPE html>
<html>
<head>
    <title>Speech Recognition and Audio Processing</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            text-align: center;
            padding: 50px;
        }
        #status, #transcript {
            color: green;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Speech Recognition and Audio Processing Demo</h1>
    <p id="status">Ready...</p>
    <p id="transcript"></p>

    <script>
        var AudioContext = window.AudioContext || window.webkitAudioContext;
        if (!('webkitSpeechRecognition' in window) || !(AudioContext)) {
            alert('Your browser does not support the required features. Try using Google Chrome.');
        } else {
            var that = this;
            var recognition = new webkitSpeechRecognition();

            recognition.continuous = true;
            recognition.interimResults = true;

            recognition.onresult = function(event) {
                var transcript = '';
                for (var i = event.resultIndex; i < event.results.length; ++i) {
                    transcript += event.results[i][0].transcript;
                }
                document.getElementById('transcript').textContent = transcript;
            };

            recognition.onstart = function() {
                var context = new AudioContext();
                navigator.mediaDevices.getUserMedia({ audio: true })
                    .then(function(stream) {
                        var liveSource = context.createMediaStreamSource(stream);
                        var levelChecker = context.createScriptProcessor(1024, 1, 1);

                        liveSource.connect(levelChecker);
                        levelChecker.connect(context.destination);
                        levelChecker.onaudioprocess = that.processAudio;
                    })
                    .catch(function(err) {
                        console.error('The following getUserMedia error occurred: ' + err);
                    });
                that.isRunning(true);
            };

            that.processAudio = function(event) {
                console.log(event);
            };

            that.isRunning = function(status) {
                document.getElementById('status').textContent = status ? 'Running...' : 'Stopped';
            };

            recognition.start();
        }
    </script>
</body>
</html>
